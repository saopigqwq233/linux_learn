# 文件系统

## 1.文件

文件=内容+属性

1.文件操作就是对内容或属性操作

2.进程打开文件，实际上是把文件加载到内存

### 1.1文件操作函数

#### 1.1.1 文件打开

1.open(path,flags)

flags设置打开方式

- linux一切皆文件，struct file{} 可以记录文件信息，有一组读写数据“接口”、“文件属性”、“文件缓冲区

#### 1.1.2 文件读取

read(int fd,char *dest,int size);

#### 1.1.3 文件写入

write(fd,buffer,n)

向进程文件表中维护的文件结构体指针数组下标为fd的文件写入大小最大为n字节的数据。

- 输出重定向

当close(1)，创打开另一个文件，write(stdout,str,size)时，写入的是新的文件而不是屏幕。

### 1.2 文件fd

操作系统使用**双链表**管理打开的文件，把文件信息放在一个链表节点中。

PCB维护一个文件表，fd实际上是文件结构体指针数组的一个下标。

### 1.3 FILE 

实际上FILE是一个结构体，内部一定封装了文件描述符fd

### 



